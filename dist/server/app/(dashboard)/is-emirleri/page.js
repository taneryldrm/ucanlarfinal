(()=>{var e={};e.id=784,e.ids=[784],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},673:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.ZP,__next_app__:()=>x,originalPathname:()=>c,pages:()=>d,routeModule:()=>m,tree:()=>o});var a=s(482),r=s(9108),i=s(1146),l=s(8300),n={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);s.d(t,n);let o=["",{children:["(dashboard)",{children:["is-emirleri",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7598)),"/Users/taneryildirim/Desktop/ucanlarfinal/app/(dashboard)/is-emirleri/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8508)),"/Users/taneryildirim/Desktop/ucanlarfinal/app/(dashboard)/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,2917)),"/Users/taneryildirim/Desktop/ucanlarfinal/app/layout.tsx"],error:[()=>Promise.resolve().then(s.bind(s,429)),"/Users/taneryildirim/Desktop/ucanlarfinal/app/error.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,1429)),"/Users/taneryildirim/Desktop/ucanlarfinal/app/not-found.tsx"]}],d=["/Users/taneryildirim/Desktop/ucanlarfinal/app/(dashboard)/is-emirleri/page.tsx"],c="/(dashboard)/is-emirleri/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(dashboard)/is-emirleri/page",pathname:"/is-emirleri",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},1:(e,t,s)=>{Promise.resolve().then(s.bind(s,7760))},7760:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var a=s(5344),r=s(3815),i=s(1838),l=s(8271),n=s(1532),o=s(7751),d=s(3729),c=s(8428),x=s(1312),m=s(7973),p=s(4755),u=s(9999),h=s(7812);function b(){let{role:e}=(0,u.j)(),[t,b]=(0,d.useState)(!1),[g,f]=(0,d.useState)(new Date().toISOString().split("T")[0]),[y,j]=(0,d.useState)([]),[N,v]=(0,d.useState)(null),[w,k]=(0,d.useState)(1),[S]=(0,d.useState)(10),[P,_]=(0,d.useState)(0),[D,E]=(0,d.useState)(!0),q=(0,c.useSearchParams)();async function C(){E(!0);try{let{data:e,count:t}=await (0,m.$f)(w,S,"",g);j(e||[]),_(t||0)}catch(e){console.error("Error fetching jobs:",e)}finally{E(!1)}}(0,d.useEffect)(()=>{C()},[w,g]),(0,d.useEffect)(()=>{"true"===q.get("new")&&(v(null),b(!0))},[q]);let T=async e=>{if(confirm("Bu iş emrini silmek istediğinize emin misiniz?"))try{let{error:t}=await m.OQ.from("work_orders").delete().eq("id",e);if(t)throw t;C()}catch(e){console.error(e),alert("Silinemedi.")}},M=e=>{v(e),b(!0)},A=Math.ceil(P/S),O=(0,h.Fs)(e||void 0,h._I.CAN_DELETE);return(0,a.jsxs)(a.Fragment,{children:[a.jsx(r.h,{title:"İş Emirleri"}),(0,a.jsxs)("div",{className:"p-8 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"İş Emirleri"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-white rounded-lg border border-slate-200 p-1",children:[a.jsx("span",{className:"text-xs font-semibold text-slate-500 px-2",children:"Tarih:"}),a.jsx("input",{type:"date",value:g,onChange:e=>{f(e.target.value),k(1)},className:"px-2 py-1.5 text-sm font-bold text-slate-700 bg-slate-50 rounded border border-slate-200 hover:bg-slate-100 outline-none"}),a.jsx("button",{onClick:()=>{f(new Date().toISOString().split("T")[0]),k(1)},className:"px-3 py-1.5 text-sm font-medium text-slate-600 hover:bg-slate-50 rounded",children:"Bug\xfcn"})]}),(0,a.jsxs)("button",{onClick:()=>{v(null),b(!0)},className:"flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 font-medium text-white transition-colors hover:bg-blue-700 shadow-md shadow-blue-200",children:[a.jsx(i.Z,{className:"h-4 w-4"}),"Yeni İş Emri"]})]})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white shadow-sm p-6 min-h-[500px]",children:[a.jsx("h3",{className:"text-sm font-bold text-slate-900 mb-4",children:"Mevcut İş Emirleri"}),a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-white text-slate-500 border-b border-slate-100",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-4 py-3 font-medium",children:"M\xfcşteri"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"Tarih"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"A\xe7ıklama"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"Personel"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"Tutar"}),a.jsx("th",{className:"px-4 py-3 font-medium",children:"Durum"}),a.jsx("th",{className:"px-4 py-3 text-right font-medium",children:"İşlemler"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-50",children:D?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"p-8 text-center text-slate-500",children:"Y\xfckleniyor..."})}):0===y.length?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-slate-500",children:"Se\xe7ilen tarihte iş emri bulunamadı."})}):y.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-slate-50/50",children:[a.jsx("td",{className:"px-4 py-4 font-bold text-slate-900",children:e.customer}),a.jsx("td",{className:"px-4 py-4 text-slate-800 font-medium",children:new Date(e.date).toLocaleDateString("tr-TR")}),a.jsx("td",{className:"px-4 py-4 text-slate-800",children:e.description}),a.jsx("td",{className:"px-4 py-4",children:a.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded bg-slate-100 text-xs font-bold text-slate-600",children:Array.isArray(e.personnel)?e.personnel.join(", "):e.personnel||"Belirsiz"})}),(0,a.jsxs)("td",{className:"px-4 py-4 font-bold text-slate-900",children:["₺",(e.amount||0).toLocaleString("tr-TR",{minimumFractionDigits:2})]}),a.jsx("td",{className:"px-4 py-4",children:a.jsx("span",{className:`inline-block px-3 py-1 text-xs font-bold rounded ${"pending"===e.status?"bg-orange-100 text-orange-700":"approved"===e.status?"bg-blue-100 text-blue-700":"completed"===e.status?"bg-green-100 text-green-700":"cancelled"===e.status?"bg-red-100 text-red-700":"bg-slate-100 text-slate-700"}`,children:"pending"===e.status?"Onay Bekliyor":"approved"===e.status?"Onaylandı":"completed"===e.status?"Tamamlandı":"cancelled"===e.status?"İptal":e.status})}),a.jsx("td",{className:"px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[a.jsx("button",{onClick:()=>M(e),className:"px-3 py-1 rounded border border-slate-200 text-xs font-bold text-slate-700 hover:bg-slate-50",children:"D\xfczenle"}),O&&a.jsx("button",{onClick:()=>T(e.id),className:"p-1.5 rounded text-red-500 hover:bg-red-50",children:a.jsx(l.Z,{className:"h-4 w-4"})})]})})]},e.id))})]})}),A>1&&(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-between border-t border-slate-100 pt-4",children:[(0,a.jsxs)("div",{className:"text-sm text-slate-500",children:["Toplam ",P," kayıt, Sayfa ",w," / ",A]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>k(e=>Math.max(1,e-1)),disabled:1===w,className:"flex items-center gap-1 rounded px-3 py-1.5 text-sm font-medium hover:bg-slate-100 disabled:opacity-50",children:[a.jsx(n.Z,{className:"h-4 w-4"})," \xd6nceki"]}),(0,a.jsxs)("button",{onClick:()=>k(e=>Math.min(A,e+1)),disabled:w===A,className:"flex items-center gap-1 rounded px-3 py-1.5 text-sm font-medium hover:bg-slate-100 disabled:opacity-50",children:["Sonraki ",a.jsx(o.Z,{className:"h-4 w-4"})]})]})]})]})]}),a.jsx(x.t,{isOpen:t,onClose:()=>{b(!1),C()},initialData:N,onSave:async e=>{try{if(N&&N.id){let{updateWorkOrder:t}=await Promise.resolve().then(s.bind(s,7973));await t(N.id,e),p.toast.success("İş emri g\xfcncellendi.")}else{let{createWorkOrder:t}=await Promise.resolve().then(s.bind(s,7973));await t(e),p.toast.success("İş emri oluşturuldu.")}b(!1),C()}catch(e){throw console.error(e),e}}})]})}},7751:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},7598:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>r,default:()=>l});let a=(0,s(6843).createProxy)(String.raw`/Users/taneryildirim/Desktop/ucanlarfinal/app/(dashboard)/is-emirleri/page.tsx`),{__esModule:r,$$typeof:i}=a,l=a.default}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[621,442,56,424,646,312],()=>s(673));module.exports=a})();