(()=>{var e={};e.id=71,e.ids=[71],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3317:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>a.ZP,__next_app__:()=>u,originalPathname:()=>d,pages:()=>c,routeModule:()=>m,tree:()=>o});var s=t(482),l=t(9108),a=t(1146),i=t(8300),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);t.d(r,n);let o=["",{children:["(dashboard)",{children:["debug-rls",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,5286)),"/Users/taneryildirim/Desktop/ucanlarfinal/app/(dashboard)/debug-rls/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,8508)),"/Users/taneryildirim/Desktop/ucanlarfinal/app/(dashboard)/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,2917)),"/Users/taneryildirim/Desktop/ucanlarfinal/app/layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,429)),"/Users/taneryildirim/Desktop/ucanlarfinal/app/error.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,1429)),"/Users/taneryildirim/Desktop/ucanlarfinal/app/not-found.tsx"]}],c=["/Users/taneryildirim/Desktop/ucanlarfinal/app/(dashboard)/debug-rls/page.tsx"],d="/(dashboard)/debug-rls/page",u={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/(dashboard)/debug-rls/page",pathname:"/debug-rls",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},3368:(e,r,t)=>{Promise.resolve().then(t.bind(t,5012))},1999:(e,r,t)=>{Promise.resolve().then(t.bind(t,748))},1739:(e,r,t)=>{Promise.resolve().then(t.bind(t,9069))},82:(e,r,t)=>{Promise.resolve().then(t.bind(t,8536))},7332:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,2583,23)),Promise.resolve().then(t.t.bind(t,6840,23)),Promise.resolve().then(t.t.bind(t,8771,23)),Promise.resolve().then(t.t.bind(t,3225,23)),Promise.resolve().then(t.t.bind(t,9295,23)),Promise.resolve().then(t.t.bind(t,3982,23))},6301:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,1476,23))},7703:(e,r,t)=>{Promise.resolve().then(t.bind(t,4755))},5012:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u});var s=t(5344),l=t(3729),a=t(5342),i=t(2739),n=t(4290),o=t(9224);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,o.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),d=(0,o.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function u(){let e=(0,a.e)(),[r,t]=(0,l.useState)({loading:!0,user:null,profile:null,collectionsCheck:null,profileError:null,collectionsError:null});return((0,l.useEffect)(()=>{(async function(){let r={},{data:{user:s},error:l}=await e.auth.getUser();if(r.user=s,r.authError=l,s){let{data:t,error:l}=await e.from("profiles").select("*").eq("id",s.id).single();r.profile=t,r.profileError=l;let{data:a,error:i,count:n}=await e.from("collections").select("*",{count:"exact",head:!1}).limit(1);r.collectionsCheck=a,r.collectionsCount=n,r.collectionsError=i}t({...r,loading:!1})})()},[]),r.loading)?(0,s.jsxs)("div",{className:"flex h-screen items-center justify-center",children:[s.jsx(i.Z,{className:"h-8 w-8 animate-spin text-blue-500"}),s.jsx("span",{className:"ml-2",children:"Sistem kontrol ediliyor..."})]}):(0,s.jsxs)("div",{className:"p-8 space-y-6 max-w-4xl mx-auto",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"RLS Debug Ekranı"}),(0,s.jsxs)("div",{className:"border p-4 rounded-lg bg-white shadow-sm",children:[(0,s.jsxs)("h2",{className:"font-semibold text-lg mb-2 flex items-center gap-2",children:["1. Oturum Durumu",r.user?s.jsx(n.Z,{className:"text-green-500"}):s.jsx(c,{className:"text-red-500"})]}),(0,s.jsxs)("div",{className:"bg-slate-100 p-3 rounded text-xs font-mono overflow-auto",children:[r.user?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["User ID: ",r.user.id]}),(0,s.jsxs)("p",{children:["Email: ",r.user.email]}),(0,s.jsxs)("p",{children:["Last Sign In: ",r.user.last_sign_in_at]})]}):s.jsx("p",{className:"text-red-500",children:"Kullanıcı oturumu bulunamadı. L\xfctfen giriş yapın."}),r.authError&&s.jsx("p",{className:"text-red-500 mt-2",children:JSON.stringify(r.authError)})]})]}),(0,s.jsxs)("div",{className:"border p-4 rounded-lg bg-white shadow-sm",children:[(0,s.jsxs)("h2",{className:"font-semibold text-lg mb-2 flex items-center gap-2",children:["2. Profil Tablosu (profiles)",r.profile?s.jsx(n.Z,{className:"text-green-500"}):s.jsx(d,{className:"text-yellow-500"})]}),(0,s.jsxs)("p",{className:"text-sm text-slate-500 mb-2",children:["RLS politikaları bu tablodaki ",s.jsx("strong",{children:"role"})," alanına g\xf6re \xe7alışır."]}),s.jsx("div",{className:"bg-slate-100 p-3 rounded text-xs font-mono overflow-auto",children:r.profile?s.jsx("pre",{children:JSON.stringify(r.profile,null,2)}):(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-red-500 font-bold",children:"Profil bulunamadı veya erişilemedi!"}),s.jsx("p",{children:"Bu, RLS politikalarının \xe7alışmamasına neden olur."}),r.profileError&&(0,s.jsxs)("p",{className:"text-red-500 mt-2",children:["Hata: ",JSON.stringify(r.profileError)]})]})})]}),(0,s.jsxs)("div",{className:"border p-4 rounded-lg bg-white shadow-sm",children:[(0,s.jsxs)("h2",{className:"font-semibold text-lg mb-2 flex items-center gap-2",children:["3. Veri Erişimi Testi (Collections)",r.collectionsError?s.jsx(c,{className:"text-red-500"}):s.jsx(n.Z,{className:"text-green-500"})]}),s.jsx("div",{className:"bg-slate-100 p-3 rounded text-xs font-mono overflow-auto",children:r.collectionsError?(0,s.jsxs)("p",{className:"text-red-500",children:["Hata: ",JSON.stringify(r.collectionsError)]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx("p",{children:"Sorgu başarılı."}),(0,s.jsxs)("p",{children:["D\xf6nen Kayıt Sayısı: ",r.collectionsCheck?.length]}),(0,s.jsxs)("p",{children:["Toplam Count: ",r.collectionsCount]}),r.collectionsCheck?.length===0&&(0,s.jsxs)("p",{className:"text-yellow-600 mt-2",children:["Uyarı: 0 kayıt d\xf6nd\xfc. Eğer tabloda veri varsa, RLS politikanız verileri gizliyor demektir. Rol\xfcn\xfcz\xfcn (",r.profile?.role,") bu tabloyu g\xf6rme yetkisi olduğundan emin olun."]})]})})]}),(0,s.jsxs)("div",{className:"bg-blue-50 p-4 rounded text-sm text-blue-800",children:[s.jsx("strong",{children:"İpucu:"})," Eğer 2. adımda profil verisi geliyor ama 3. adımda veri gelmiyorsa,",s.jsx("code",{children:"role"}),' alanındaki değerin (\xf6rn: "',r.profile?.role,'") veritabanındaki RLS politikasında yazan değerle (\xf6rn: "sistem y\xf6neticisi")',s.jsx("strong",{children:"birebir aynı"})," (boşluklar, harf duyarlılığı) olduğunu kontrol edin."]})]})}},748:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});var s=t(5344),l=t(3729);function a({error:e,reset:r}){return(0,l.useEffect)(()=>{console.error(e)},[e]),(0,s.jsxs)("div",{className:"flex h-[50vh] flex-col items-center justify-center gap-4 text-center",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Bir şeyler ters gitti!"}),s.jsx("p",{className:"text-slate-500",children:e.message}),s.jsx("button",{onClick:()=>r(),className:"rounded-lg bg-red-50 px-4 py-2 text-sm font-medium text-red-600 hover:bg-red-100",children:"Tekrar Dene"})]})}},9069:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});var s=t(5344),l=t(3729);function a({error:e,reset:r}){return(0,l.useEffect)(()=>{console.error(e)},[e]),s.jsx("html",{children:s.jsx("body",{children:(0,s.jsxs)("div",{className:"flex min-h-screen flex-col items-center justify-center gap-4 text-center",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Bir şeyler yanlış gitti!"}),s.jsx("p",{className:"text-slate-600",children:e.message}),s.jsx("button",{onClick:()=>r(),className:"rounded bg-blue-600 px-4 py-2 text-white hover:bg-blue-700",children:"Tekrar Dene"})]})})})}},8536:(e,r,t)=>{"use strict";t.r(r),t.d(r,{Sidebar:()=>P,menuItems:()=>w});var s=t(5344),l=t(6506),a=t(8428),i=t(2273),n=t(340),o=t(9895),c=t(5366),d=t(3425),u=t(958),m=t(7925),x=t(5313),h=t(5674),p=t(6213),f=t(5794),g=t(8587),b=t(617),y=t(3746),j=t(473),v=t(1626),N=t(9999),k=t(7812);let w=[{name:"Dashboard",href:"/",icon:i.Z},{name:"Raporlama",href:"/raporlama",icon:n.Z},{name:"M\xfcşteriler",href:"/musteriler",icon:o.Z},{name:"Personel",href:"/personel",icon:c.Z},{name:"İş Emirleri",href:"/is-emirleri",icon:d.Z},{name:"G\xfcnl\xfck Program",href:"/gunluk-program",icon:u.Z},{name:"Personel Yevmiye",href:"/personel-yevmiye",icon:m.Z},{name:"G\xfcnl\xfck Kasa",href:"/gunluk-kasa",icon:x.Z},{name:"Bekleyen Tahsilatlar",href:"/bekleyen-tahsilatlar",icon:h.Z},{name:"Ge\xe7miş Arama",href:"/gecmis-arama",icon:p.Z},{name:"Takvim",href:"/takvim",icon:f.Z},{name:"Gelir/Gider",href:"/gelir-gider",icon:g.Z},{name:"AI Randevu",href:"/ai-randevu",icon:b.Z},{name:"Kullanıcılar",href:"/kullanicilar",icon:y.Z}];function P(){let e=(0,a.usePathname)(),{role:r,loading:t}=(0,N.j)();return(0,s.jsxs)("div",{className:"flex h-screen w-64 flex-col bg-[#0f172a] text-white print:hidden",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 px-6 py-8",children:[s.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-blue-500/20 text-blue-500",children:s.jsx(j.Z,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-lg font-bold leading-none",children:"U\xe7anlar"}),s.jsx("p",{className:"text-xs text-slate-400",children:"Temizlik Hizmetleri"})]})]}),s.jsx("nav",{className:"flex-1 space-y-1 overflow-y-auto px-3 py-4 scrollbar-thin scrollbar-thumb-slate-700",children:t?s.jsx("div",{className:"px-4 text-xs text-slate-500",children:"Men\xfc y\xfckleniyor..."}):w.filter(e=>(0,k.mn)(r||void 0,e.href)).map(r=>{let t=e===r.href;return(0,s.jsxs)(l.default,{href:r.href,className:(0,v.cn)("flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium transition-colors",t?"bg-blue-600 text-white shadow-lg shadow-blue-900/20":"text-slate-400 hover:bg-slate-800 hover:text-white"),children:[s.jsx(r.icon,{className:(0,v.cn)("h-5 w-5",t?"text-white":"text-slate-400")}),r.name]},r.href)})})]})}},9999:(e,r,t)=>{"use strict";t.d(r,{j:()=>a});var s=t(3729),l=t(5342);function a(){let[e,r]=(0,s.useState)(null),[t,a]=(0,s.useState)(null),[i,n]=(0,s.useState)(!0),o=(0,l.e)();return(0,s.useEffect)(()=>{(async function(){try{let{data:{user:e}}=await o.auth.getUser();if(e){let{data:t}=await o.from("profiles").select("*").eq("id",e.id).single();t&&(r(t.role),a(t))}}catch(e){console.error("Error fetching role:",e)}finally{n(!1)}})()},[]),{role:e,profile:t,loading:i}}},7812:(e,r,t)=>{"use strict";t.d(r,{Fs:()=>n,_I:()=>a,mn:()=>i});let s={ADMIN:"sistem y\xf6neticisi",DATA_ENTRY:"veri girici",FIELD_SUPERVISOR:"saha sorumlusu",DRIVER:"şof\xf6r"},l={[s.ADMIN]:["*"],[s.DATA_ENTRY]:["*","!/kullanicilar"],[s.FIELD_SUPERVISOR]:["*","!/raporlama","!/gelir-gider","!/kullanicilar"],[s.DRIVER]:["/gunluk-program","/login"]},a={CAN_DELETE:[s.ADMIN],CAN_APPROVE_WORK_ORDER:[s.ADMIN,s.DATA_ENTRY],CAN_MANAGE_ACCRUALS:[s.ADMIN,s.DATA_ENTRY]};function i(e,r){if(!e)return!1;if("/"===r||"/login"===r)return!0;let t=r.split("?")[0],s=l[e];return!!s&&(s.includes("*")?!s.filter(e=>e.startsWith("!")).map(e=>e.substring(1)).some(e=>t.startsWith(e)):s.some(e=>t.startsWith(e)))}function n(e,r){return!!e&&r.includes(e)}},1626:(e,r,t)=>{"use strict";t.d(r,{cn:()=>a});var s=t(6815),l=t(9377);function a(...e){return(0,l.m6)((0,s.W)(e))}},4290:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(9224).Z)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},2739:(e,r,t)=>{"use strict";t.d(r,{Z:()=>s});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(9224).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},5342:(e,r,t)=>{"use strict";t.d(r,{e:()=>l});var s=t(3974);function l(){return(0,s.createBrowserClient)("https://rzcumzfzurthasgptggd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ6Y3VtemZ6dXJ0aGFzZ3B0Z2dkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYxNDA5MzYsImV4cCI6MjA4MTcxNjkzNn0.NlyDKeMj-4xa7ZSt5wsyRdCOay8w2SAIA-ZTjIRkyHw")}},5286:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>a,__esModule:()=>l,default:()=>i});let s=(0,t(6843).createProxy)(String.raw`/Users/taneryildirim/Desktop/ucanlarfinal/app/(dashboard)/debug-rls/page.tsx`),{__esModule:l,$$typeof:a}=s,i=s.default},8508:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c});var s=t(5036),l=t(6843);let a=(0,l.createProxy)(String.raw`/Users/taneryildirim/Desktop/ucanlarfinal/components/Sidebar.tsx`),{__esModule:i,$$typeof:n}=a;a.default,(0,l.createProxy)(String.raw`/Users/taneryildirim/Desktop/ucanlarfinal/components/Sidebar.tsx#menuItems`);let o=(0,l.createProxy)(String.raw`/Users/taneryildirim/Desktop/ucanlarfinal/components/Sidebar.tsx#Sidebar`);function c({children:e}){return(0,s.jsxs)("div",{className:"flex h-screen bg-slate-50 text-slate-900",children:[s.jsx("div",{className:"hidden md:flex h-full",children:s.jsx(o,{})}),s.jsx("div",{className:"flex flex-1 flex-col overflow-hidden",children:s.jsx("main",{className:"flex-1 overflow-y-auto bg-slate-50",children:e})})]})}},429:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>a,__esModule:()=>l,default:()=>i});let s=(0,t(6843).createProxy)(String.raw`/Users/taneryildirim/Desktop/ucanlarfinal/app/error.tsx`),{__esModule:l,$$typeof:a}=s,i=s.default},1146:(e,r,t)=>{"use strict";t.d(r,{ZP:()=>i});let s=(0,t(6843).createProxy)(String.raw`/Users/taneryildirim/Desktop/ucanlarfinal/app/global-error.tsx`),{__esModule:l,$$typeof:a}=s,i=s.default},2917:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>o,metadata:()=>n});var s=t(5036),l=t(8592),a=t.n(l);t(7272);var i=t(7171);let n={title:"U\xe7anlar Temizlik Y\xf6netim Paneli",description:"U\xe7anlar Temizlik Hizmetleri Y\xf6netim Sistemi"};function o({children:e}){return s.jsx("html",{lang:"tr",children:(0,s.jsxs)("body",{className:a().className,children:[e,s.jsx(i.x7,{position:"top-right"})]})})}},1429:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});var s=t(5036),l=t(6274);function a(){return(0,s.jsxs)("div",{className:"flex h-[50vh] flex-col items-center justify-center gap-4 text-center",children:[s.jsx("h2",{className:"text-4xl font-bold text-slate-800",children:"404"}),s.jsx("p",{className:"text-lg text-slate-600",children:"Sayfa bulunamadı"}),s.jsx(l.default,{href:"/",className:"rounded-lg bg-blue-600 px-4 py-2 text-white transition-colors hover:bg-blue-700",children:"Ana Sayfaya D\xf6n"})]})}},7272:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[621,442,56],()=>t(3317));module.exports=s})();