(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[39],{5063:function(e,t,s){Promise.resolve().then(s.bind(s,3239))},3239:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var a=s(3827),l=s(1232),n=s(9108),r=s(7805),c=s(4059),i=s(4090),d=s(1657),o=s(2235);function x(e){let{isOpen:t,onClose:s,date:l,jobs:n}=e;return t?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/50 backdrop-blur-sm p-4",children:(0,a.jsxs)("div",{className:"w-full max-w-4xl rounded-xl bg-white shadow-2xl animate-in fade-in zoom-in duration-200 flex flex-col max-h-[90vh]",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between border-b border-slate-100 p-6 shrink-0",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-slate-900",children:[l," - İş Detayları"]}),(0,a.jsx)("button",{onClick:s,className:"rounded-lg p-2 text-slate-400 hover:bg-slate-50 hover:text-slate-600 transition-colors",children:(0,a.jsx)(o.Z,{className:"h-5 w-5"})})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6 bg-slate-50/50",children:n.map((e,t)=>(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-slate-900",children:e.customer}),(0,a.jsx)("span",{className:(0,d.cn)("px-3 py-1 rounded text-xs font-bold uppercase","Onaylanmadı"===e.status?"bg-amber-100 text-amber-700":"bg-green-100 text-green-700"),children:e.status})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"A\xe7ıklama:"}),(0,a.jsx)("p",{className:"text-sm font-medium text-slate-900",children:e.description})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Adres:"}),(0,a.jsx)("p",{className:"text-sm font-medium text-slate-900",children:e.address})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Tutar:"}),(0,a.jsx)("p",{className:"text-sm font-bold text-green-600",children:e.amount})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("span",{className:"text-xs font-bold text-slate-500 uppercase",children:"Personel Sayısı:"}),(0,a.jsx)("p",{className:"text-sm font-bold text-slate-900",children:e.staffCount})]})]}),(0,a.jsxs)("div",{className:"space-y-3 pt-4 border-t border-slate-100",children:[(0,a.jsx)("h4",{className:"text-sm font-bold text-slate-900",children:"\xc7alışan Personel:"}),(0,a.jsx)("div",{className:"bg-slate-50 rounded-lg border border-slate-100 overflow-hidden",children:(0,a.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,a.jsx)("thead",{className:"text-slate-500 border-b border-slate-200 bg-slate-100/50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-2 font-medium text-xs",children:"Personel Adı"}),(0,a.jsx)("th",{className:"px-4 py-2 font-medium text-xs",children:"Rol"}),(0,a.jsx)("th",{className:"px-4 py-2 font-medium text-xs",children:"Telefon"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-slate-100",children:e.assignedStaff.map((e,t)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-4 py-2 font-bold text-slate-800 text-xs",children:e.name}),(0,a.jsx)("td",{className:"px-4 py-2 text-slate-600 text-xs",children:e.role}),(0,a.jsx)("td",{className:"px-4 py-2 text-slate-600 text-xs",children:e.phone})]},t))})]})})]})]},t))})]})}):null}var u=s(9807);function m(){let[e,t]=(0,i.useState)(new Date),[s,o]=(0,i.useState)(null),[m,h]=(0,i.useState)([]),[f,p]=(0,i.useState)(!1),[b,j]=(0,i.useState)({}),[g,N]=(0,i.useState)(!1);(0,i.useEffect)(()=>{!async function(){N(!0);try{let t=await (0,u.S4)(e.getFullYear(),e.getMonth());j(t)}catch(e){console.error("Takvim verisi hatası:",e)}finally{N(!1)}}()},[e]);let y=new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),v=Array.from({length:(e=>{let t=new Date(e.getFullYear(),e.getMonth(),1).getDay();return 0===t?6:t-1})(e)}),w=Array.from({length:y},(e,t)=>t+1),k=t=>{let s=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),l=String(t).padStart(2,"0");return"".concat(s,"-").concat(a,"-").concat(l)},Z=t=>{let s=b[k(t)];s&&s.length>0&&(o(new Date(e.getFullYear(),e.getMonth(),t).toLocaleDateString("tr-TR",{day:"numeric",month:"long",year:"numeric"})),h(s),p(!0))},S=e=>{let t=b[k(e)]||[];if(0===t.length)return 0;let s=new Set;return t.forEach(e=>{var t;null===(t=e.assignedStaff)||void 0===t||t.forEach(e=>s.add(e.name))}),s.size};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.h,{title:"Takvim"}),(0,a.jsxs)("div",{className:"p-8 space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-slate-800",children:"Personel Takvimi"}),(0,a.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white shadow-sm p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsx)("button",{onClick:()=>{t(new Date(e.getFullYear(),e.getMonth()-1,1))},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:(0,a.jsx)(n.Z,{className:"h-5 w-5 text-slate-500"})}),(0,a.jsx)("h3",{className:"text-lg font-bold text-slate-900 capitalize",children:e.toLocaleDateString("tr-TR",{month:"long",year:"numeric"})}),(0,a.jsx)("button",{onClick:()=>{t(new Date(e.getFullYear(),e.getMonth()+1,1))},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:(0,a.jsx)(r.Z,{className:"h-5 w-5 text-slate-500"})})]}),(0,a.jsx)("div",{className:"grid grid-cols-7 mb-4",children:["Pzt","Sal","\xc7ar","Per","Cum","Cmt","Paz"].map(e=>(0,a.jsx)("div",{className:"text-center text-sm font-medium text-slate-500 py-2",children:e},e))}),(0,a.jsxs)("div",{className:"grid grid-cols-7 gap-2",children:[v.map((e,t)=>(0,a.jsx)("div",{className:"min-h-[120px]"},"empty-".concat(t))),w.map(e=>{let t=S(e);return(0,a.jsxs)("div",{onClick:()=>Z(e),className:(0,d.cn)("min-h-[100px] rounded-xl border p-2 transition-all cursor-pointer relative",t>0?"bg-white border-slate-200 hover:border-blue-300 hover:shadow-md":"bg-slate-50/50 border-slate-100 text-slate-400"),children:[(0,a.jsx)("span",{className:(0,d.cn)("text-sm font-semibold block mb-2",t>0?"text-slate-700":"text-slate-400"),children:e}),t>0&&(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-100 rounded-lg p-2 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"bg-blue-100 p-1.5 rounded-md",children:(0,a.jsx)(c.Z,{className:"h-3 w-3 text-blue-600"})}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-xs font-bold text-blue-900 leading-none",children:t}),(0,a.jsx)("span",{className:"text-[10px] font-medium text-blue-600 leading-none mt-0.5",children:"Personel"})]})]})]},e)})]})]})]}),s&&(0,a.jsx)(x,{isOpen:f,onClose:()=>p(!1),date:s,jobs:m})]})}},1232:function(e,t,s){"use strict";s.d(t,{h:function(){return u}});var a=s(3827),l=s(9108),n=s(1213),r=s(1049),c=s(8458),i=s(7907),d=s(8792),o=s(6288),x=s(5838);function u(e){let{title:t}=e,s=(0,i.useRouter)(),u=(0,i.usePathname)(),m=(0,c.e)(),{role:h,profile:f,loading:p}=(0,x.j)(),b=async()=>{try{await m.auth.signOut(),o.toast.success("\xc7ıkış yapıldı"),s.push("/login"),s.refresh()}catch(e){o.toast.error("\xc7ıkış yapılırken hata oluştu")}};return(0,a.jsxs)("header",{className:"flex h-20 items-center justify-between border-b bg-white px-4 md:px-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"md:hidden",children:"/"!==u&&(0,a.jsx)(d.default,{href:"/",className:"flex items-center justify-center p-2 -ml-2 text-slate-600 hover:bg-slate-100 rounded-full",children:(0,a.jsx)(l.Z,{className:"h-6 w-6"})})}),(0,a.jsx)("h2",{className:"text-lg md:text-xl font-bold text-slate-800 truncate max-w-[200px] md:max-w-none",children:t||"Y\xf6netim Paneli"})]}),(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 rounded-full border border-slate-200 bg-slate-50 p-1 pl-4 pr-2",children:[(0,a.jsx)("div",{className:"flex flex-col items-end",children:p?(0,a.jsx)("span",{className:"text-xs text-slate-400",children:"Y\xfckleniyor..."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-sm font-semibold text-slate-900",children:(null==f?void 0:f.full_name)||(null==f?void 0:f.name)||(null==f?void 0:f.email)||"Kullanıcı"}),(0,a.jsx)("span",{className:"text-xs text-slate-500 capitalize",children:h||"Yetkisiz"})]})}),(0,a.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-slate-200 text-slate-600",children:(0,a.jsx)(n.Z,{className:"h-5 w-5"})}),(0,a.jsx)("button",{onClick:b,className:"ml-2 rounded-full p-2 text-slate-400 hover:bg-slate-200 hover:text-slate-600 transition-colors",title:"\xc7ıkış Yap",children:(0,a.jsx)(r.Z,{className:"h-5 w-5"})})]})})]})}},5838:function(e,t,s){"use strict";s.d(t,{j:function(){return n}});var a=s(4090),l=s(8458);function n(){let[e,t]=(0,a.useState)(null),[s,n]=(0,a.useState)(null),[r,c]=(0,a.useState)(!0),i=(0,l.e)();return(0,a.useEffect)(()=>{(async function(){try{let{data:{user:e}}=await i.auth.getUser();if(e){let{data:s}=await i.from("profiles").select("*").eq("id",e.id).single();s&&(t(s.role),n(s))}}catch(e){console.error("Error fetching role:",e)}finally{c(!1)}})()},[]),{role:e,profile:s,loading:r}}},1657:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var a=s(3167),l=s(1367);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,l.m6)((0,a.W)(t))}},9108:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},7805:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},1049:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},1213:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},4059:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},2235:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},8458:function(e,t,s){"use strict";s.d(t,{e:function(){return l}});var a=s(6070);function l(){return(0,a.createBrowserClient)("https://rzcumzfzurthasgptggd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ6Y3VtemZ6dXJ0aGFzZ3B0Z2dkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYxNDA5MzYsImV4cCI6MjA4MTcxNjkzNn0.NlyDKeMj-4xa7ZSt5wsyRdCOay8w2SAIA-ZTjIRkyHw")}}},function(e){e.O(0,[257,288,250,224,807,971,69,744],function(){return e(e.s=5063)}),_N_E=e.O()}]);