(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[326],{7387:function(e,t,s){Promise.resolve().then(s.bind(s,6583))},6583:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var a=s(3827),l=s(1232),n=s(3879),r=s(5904);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,s(7461).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var c=s(7976),d=s(6490),o=s(8792),u=s(4090),x=s(9807);function h(e){let{params:t}=e,[s,h]=(0,u.useState)(null),[m,f]=(0,u.useState)(!0);return((0,u.useEffect)(()=>{async function e(){f(!0);try{let e=await (0,x.$k)(t.id);h(e)}catch(e){console.error(e)}finally{f(!1)}}t.id&&e()},[t.id]),m)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.h,{title:"M\xfcşteri Detayı"}),(0,a.jsx)("div",{className:"p-8 text-center text-slate-500",children:"Y\xfckleniyor..."})]}):s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.h,{title:"M\xfcşteri Detayı"}),(0,a.jsxs)("div",{className:"p-8 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(o.default,{href:"/musteriler",className:"p-2 rounded-lg hover:bg-slate-100 text-slate-500 transition-colors",children:(0,a.jsx)(n.Z,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-slate-800",children:s.name}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[(0,a.jsx)("span",{className:"bg-blue-100 text-blue-700 px-2 py-0.5 rounded text-xs font-bold",children:s.type||"Normal"}),(0,a.jsxs)("span",{children:["M\xfcşteri No: #",t.id]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6 shadow-sm space-y-6",children:[(0,a.jsx)("h3",{className:"font-bold text-slate-900 border-b border-slate-100 pb-4",children:"İletişim Bilgileri"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(r.Z,{className:"h-5 w-5 text-slate-400 shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-bold text-slate-400 uppercase",children:"Telefon"}),(0,a.jsx)("p",{className:"font-medium text-slate-900",children:s.phone||"-"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(i,{className:"h-5 w-5 text-slate-400 shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-bold text-slate-400 uppercase",children:"Adres"}),(0,a.jsx)("p",{className:"font-medium text-slate-900",children:s.address||"-"})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6 shadow-sm space-y-6",children:[(0,a.jsx)("h3",{className:"font-bold text-slate-900 border-b border-slate-100 pb-4",children:"Finansal Durum"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-slate-600 font-medium",children:"Bakiye"}),(0,a.jsxs)("span",{className:"text-2xl font-bold text-slate-900",children:["₺",s.current_balance?s.current_balance:"0.00"]})]})]})]}),(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 p-6 shadow-sm min-h-[400px]",children:[(0,a.jsx)("h3",{className:"font-bold text-slate-900 mb-6",children:"İşlem Ge\xe7mişi"}),(0,a.jsx)("div",{className:"space-y-4",children:0===(s.history||[]).length?(0,a.jsx)("div",{className:"text-center text-slate-500 py-8",children:"İşlem ge\xe7mişi bulunamadı."}):(s.history||[]).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg bg-slate-50 border border-slate-100 hover:border-blue-200 transition-all",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-full bg-white flex items-center justify-center border border-slate-200 text-slate-500",children:e.isPlus?(0,a.jsx)(c.Z,{className:"h-5 w-5 text-green-500"}):(0,a.jsx)(d.Z,{className:"h-5 w-5 text-orange-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold text-slate-900",children:e.description}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs font-medium text-slate-500",children:[(0,a.jsx)("span",{children:e.date?new Date(e.date).toLocaleDateString("tr-TR"):"-"}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:"collection"===e.type?"Tahsilat":"Hizmet / İş Emri"})]})]})]}),(0,a.jsxs)("span",{className:e.isPlus?"text-green-600 font-bold":"text-slate-900 font-bold",children:[e.isPlus?"+":"-","₺",Math.abs(e.amount).toLocaleString("tr-TR",{minimumFractionDigits:2})]})]},e.id||t))})]})})]})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.h,{title:"M\xfcşteri Detayı"}),(0,a.jsx)("div",{className:"p-8 text-center text-slate-500",children:"M\xfcşteri bulunamadı."})]})}},1232:function(e,t,s){"use strict";s.d(t,{h:function(){return x}});var a=s(3827),l=s(9108),n=s(1213),r=s(1049),i=s(8458),c=s(7907),d=s(8792),o=s(6288),u=s(5838);function x(e){let{title:t}=e,s=(0,c.useRouter)(),x=(0,c.usePathname)(),h=(0,i.e)(),{role:m,profile:f,loading:p}=(0,u.j)(),j=async()=>{try{await h.auth.signOut(),o.toast.success("\xc7ıkış yapıldı"),s.push("/login"),s.refresh()}catch(e){o.toast.error("\xc7ıkış yapılırken hata oluştu")}};return(0,a.jsxs)("header",{className:"flex h-20 items-center justify-between border-b bg-white px-4 md:px-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"md:hidden",children:"/"!==x&&(0,a.jsx)(d.default,{href:"/",className:"flex items-center justify-center p-2 -ml-2 text-slate-600 hover:bg-slate-100 rounded-full",children:(0,a.jsx)(l.Z,{className:"h-6 w-6"})})}),(0,a.jsx)("h2",{className:"text-lg md:text-xl font-bold text-slate-800 truncate max-w-[200px] md:max-w-none",children:t||"Y\xf6netim Paneli"})]}),(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 rounded-full border border-slate-200 bg-slate-50 p-1 pl-4 pr-2",children:[(0,a.jsx)("div",{className:"flex flex-col items-end",children:p?(0,a.jsx)("span",{className:"text-xs text-slate-400",children:"Y\xfckleniyor..."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-sm font-semibold text-slate-900",children:(null==f?void 0:f.full_name)||(null==f?void 0:f.name)||(null==f?void 0:f.email)||"Kullanıcı"}),(0,a.jsx)("span",{className:"text-xs text-slate-500 capitalize",children:m||"Yetkisiz"})]})}),(0,a.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-slate-200 text-slate-600",children:(0,a.jsx)(n.Z,{className:"h-5 w-5"})}),(0,a.jsx)("button",{onClick:j,className:"ml-2 rounded-full p-2 text-slate-400 hover:bg-slate-200 hover:text-slate-600 transition-colors",title:"\xc7ıkış Yap",children:(0,a.jsx)(r.Z,{className:"h-5 w-5"})})]})})]})}},5838:function(e,t,s){"use strict";s.d(t,{j:function(){return n}});var a=s(4090),l=s(8458);function n(){let[e,t]=(0,a.useState)(null),[s,n]=(0,a.useState)(null),[r,i]=(0,a.useState)(!0),c=(0,l.e)();return(0,a.useEffect)(()=>{(async function(){try{let{data:{user:e}}=await c.auth.getUser();if(e){let{data:s}=await c.from("profiles").select("*").eq("id",e.id).single();s&&(t(s.role),n(s))}}catch(e){console.error("Error fetching role:",e)}finally{i(!1)}})()},[]),{role:e,profile:s,loading:r}}},3879:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7976:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},9108:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},6490:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1049:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},5904:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},1213:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},8792:function(e,t,s){"use strict";s.d(t,{default:function(){return l.a}});var a=s(5250),l=s.n(a)},7907:function(e,t,s){"use strict";var a=s(5313);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},8458:function(e,t,s){"use strict";s.d(t,{e:function(){return l}});var a=s(6070);function l(){return(0,a.createBrowserClient)("https://rzcumzfzurthasgptggd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ6Y3VtemZ6dXJ0aGFzZ3B0Z2dkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYxNDA5MzYsImV4cCI6MjA4MTcxNjkzNn0.NlyDKeMj-4xa7ZSt5wsyRdCOay8w2SAIA-ZTjIRkyHw")}}},function(e){e.O(0,[257,288,250,807,971,69,744],function(){return e(e.s=7387)}),_N_E=e.O()}]);