(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[399],{3485:function(e,t,s){Promise.resolve().then(s.bind(s,5577))},5577:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var r=s(3827),a=s(1232),l=s(3915),n=s(6490),d=s(4059),c=s(7976);/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,s(7461).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var o=s(1657),x=s(4090),m=s(9807),h=s(6288);function u(){let[e,t]=(0,x.useState)(new Date().toISOString().split("T")[0]),[s,u]=(0,x.useState)([]),[p,b]=(0,x.useState)(!1),f=async()=>{b(!0);try{let{data:t}=await (0,m.$f)(1,100,"",e);u(t||[])}catch(e){console.error("Error fetching daily jobs:",e),h.toast.error("G\xfcnl\xfck işler y\xfcklenirken hata oluştu.")}finally{b(!1)}};(0,x.useEffect)(()=>{f()},[e]);let j=new Set(s.flatMap(e=>e.assigned_staff||[])).size,N=async e=>{try{await (0,m.r_)(e),h.toast.success("İş emri onaylandı."),f()}catch(e){console.error("Approval error:",e),h.toast.error("Onaylama başarısız.")}},y=async()=>{try{let e=s.filter(e=>"pending"===e.status);await Promise.all(e.map(e=>(0,m.r_)(e.id))),h.toast.success("T\xfcm işler onaylandı."),f()}catch(e){h.toast.error("Toplu onay işleminde hata.")}};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"print:hidden",children:[(0,r.jsx)(a.h,{title:"G\xfcnl\xfck Program"}),(0,r.jsxs)("div",{className:"p-8 space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-slate-900",children:"G\xfcnl\xfck İş Programı"}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("button",{onClick:()=>window.print(),className:"flex items-center gap-2 rounded-lg border border-slate-200 bg-white px-4 py-2 text-sm font-medium text-slate-700 hover:bg-slate-50 transition-colors",children:[(0,r.jsx)(l.Z,{className:"h-4 w-4"}),"Yazdır"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 rounded-lg border border-slate-200 bg-white p-1",children:[(0,r.jsx)("input",{type:"date",value:e,onChange:e=>t(e.target.value),className:"px-2 py-1.5 text-sm font-bold text-slate-700 bg-slate-50 rounded border border-slate-200 hover:bg-slate-100 outline-none"}),(0,r.jsx)("button",{onClick:()=>t(new Date().toISOString().split("T")[0]),className:"px-3 py-1.5 text-sm font-medium text-slate-600 hover:bg-slate-50 rounded",children:"Bug\xfcn"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm flex items-center gap-4",children:[(0,r.jsx)("div",{className:"rounded-full bg-blue-50 p-3",children:(0,r.jsx)(n.Z,{className:"h-8 w-8 text-blue-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-slate-500",children:"Toplam İş"}),(0,r.jsx)("h3",{className:"text-3xl font-bold text-slate-900",children:s.length})]})]}),(0,r.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm flex items-center gap-4",children:[(0,r.jsx)("div",{className:"rounded-full bg-green-50 p-3",children:(0,r.jsx)(d.Z,{className:"h-8 w-8 text-green-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-slate-500",children:"\xc7alışan Personel"}),(0,r.jsx)("h3",{className:"text-3xl font-bold text-slate-900",children:j})]})]})]}),(0,r.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white shadow-sm p-6 min-h-[500px]",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"font-bold text-slate-900",children:"G\xfcn\xfcn İşleri"}),(0,r.jsxs)("button",{onClick:y,className:"flex items-center gap-2 rounded-lg bg-green-600 px-4 py-2 text-sm font-medium text-white hover:bg-green-700 transition-colors shadow-sm",children:[(0,r.jsx)(c.Z,{className:"h-4 w-4"}),"Hepsini Onayla"]})]}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,r.jsx)("thead",{className:"text-slate-500 border-b border-slate-100",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-4 py-4 font-medium",children:"M\xfcşteri"}),(0,r.jsx)("th",{className:"px-4 py-4 font-medium",children:"Personel"}),(0,r.jsx)("th",{className:"px-4 py-4 font-medium",children:"A\xe7ıklama"}),(0,r.jsx)("th",{className:"px-4 py-4 font-medium",children:"Adres"}),(0,r.jsx)("th",{className:"px-4 py-4 font-medium",children:"Durum"}),(0,r.jsx)("th",{className:"px-4 py-4 text-right font-medium",children:"İşlemler"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-slate-100",children:p?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:6,className:"p-8 text-center text-slate-500",children:"Y\xfckleniyor..."})}):0===s.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:6,className:"px-4 py-8 text-center text-slate-500",children:"Se\xe7ilen tarihte planlanmış iş bulunmamaktadır."})}):s.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-slate-50/50",children:[(0,r.jsx)("td",{className:"px-4 py-4 font-bold text-slate-900",children:e.customer}),(0,r.jsx)("td",{className:"px-4 py-4",children:(0,r.jsx)("span",{className:"inline-block rounded bg-slate-100 px-3 py-1 text-xs font-bold text-slate-700 uppercase",children:e.personnel||"Belirsiz"})}),(0,r.jsx)("td",{className:"px-4 py-4 text-slate-800",children:e.description}),(0,r.jsx)("td",{className:"px-4 py-4 text-slate-600 font-medium",children:e.address}),(0,r.jsx)("td",{className:"px-4 py-4",children:(0,r.jsx)("span",{className:(0,o.cn)("inline-block px-3 py-1 text-xs font-bold rounded","approved"===e.status?"bg-green-100 text-green-700":"pending"===e.status?"bg-orange-100 text-orange-700":"bg-slate-100 text-slate-700"),children:"pending"===e.status?"Onay Bekliyor":"approved"===e.status?"Onaylandı":e.status})}),(0,r.jsx)("td",{className:"px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-end",children:["approved"!==e.status&&(0,r.jsx)("button",{onClick:()=>N(e.id),className:"px-4 py-1.5 rounded border border-slate-200 text-xs font-bold text-slate-700 hover:bg-slate-50 transition-colors shadow-sm",children:"Onayla"}),"approved"===e.status&&(0,r.jsxs)("span",{className:"flex items-center gap-1 text-green-600 text-xs font-bold px-4 py-1.5",children:[(0,r.jsx)(i,{className:"h-4 w-4"}),"Onaylandı"]})]})})]},e.id))})]})})]})]})]}),(0,r.jsxs)("div",{className:"hidden print:block p-4 font-sans text-xs bg-white text-black min-h-screen",children:[(0,r.jsxs)("div",{className:"flex justify-between border-b border-black pb-2 mb-2 font-bold text-[10px]",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:"VERGI KIMLIK NUMARASI: 8840638625"}),(0,r.jsx)("div",{children:"SOYADI (UNVANI): U\xc7ANLAR TEMİZLİK"})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{children:"MAKINA NO: ........................"}),(0,r.jsx)("div",{children:"SIRA NO: ........................"})]})]}),(0,r.jsxs)("div",{className:"text-center mb-1",children:[(0,r.jsx)("h1",{className:"text-sm font-bold uppercase",children:"G\xdcN\xdc MOBİL İŞ PROGRAMI"}),(0,r.jsxs)("div",{className:"text-[10px] font-bold mt-1",children:["Tarih: ",e.split("-").reverse().join("/")]})]}),(0,r.jsxs)("table",{className:"w-full border-collapse border border-black text-[9px] mt-2",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-100 text-center",children:[(0,r.jsx)("th",{className:"border border-black p-1 w-8",children:"Sıra No"}),(0,r.jsx)("th",{className:"border border-black p-1",children:"M\xfcşteri Ad - Unvan"}),(0,r.jsx)("th",{className:"border border-black p-1 w-20",children:"M\xfcşteri Tel"}),(0,r.jsx)("th",{className:"border border-black p-1",children:"Personel Ad"}),(0,r.jsx)("th",{className:"border border-black p-1 w-48",children:"Yapılacak İş ve A\xe7ıklamalar"}),(0,r.jsx)("th",{className:"border border-black p-1",children:"İş Adresi"}),(0,r.jsx)("th",{className:"border border-black p-1 w-16",children:"\xdccret"})]})}),(0,r.jsxs)("tbody",{children:[s.map((e,t)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"border border-black p-1 text-center font-bold",children:t+1}),(0,r.jsx)("td",{className:"border border-black p-1 font-bold",children:e.customer}),(0,r.jsx)("td",{className:"border border-black p-1 text-center",children:e.customer_phone||"-"}),(0,r.jsx)("td",{className:"border border-black p-1 font-bold",children:e.personnel}),(0,r.jsx)("td",{className:"border border-black p-1",children:e.description}),(0,r.jsx)("td",{className:"border border-black p-1",children:e.address}),(0,r.jsx)("td",{className:"border border-black p-1 text-right",children:e.amount?"₺".concat(e.amount):"-"})]},e.id)),Array.from({length:Math.max(0,25-s.length)}).map((e,t)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"border border-black p-1 h-6 text-center",children:s.length+t+1}),(0,r.jsx)("td",{className:"border border-black p-1"}),(0,r.jsx)("td",{className:"border border-black p-1"}),(0,r.jsx)("td",{className:"border border-black p-1"}),(0,r.jsx)("td",{className:"border border-black p-1"}),(0,r.jsx)("td",{className:"border border-black p-1"}),(0,r.jsx)("td",{className:"border border-black p-1"})]},"empty-".concat(t)))]})]})]})]})})}},1232:function(e,t,s){"use strict";s.d(t,{h:function(){return m}});var r=s(3827),a=s(9108),l=s(1213),n=s(1049),d=s(8458),c=s(7907),i=s(8792),o=s(6288),x=s(5838);function m(e){let{title:t}=e,s=(0,c.useRouter)(),m=(0,c.usePathname)(),h=(0,d.e)(),{role:u,profile:p,loading:b}=(0,x.j)(),f=async()=>{try{await h.auth.signOut(),o.toast.success("\xc7ıkış yapıldı"),s.push("/login"),s.refresh()}catch(e){o.toast.error("\xc7ıkış yapılırken hata oluştu")}};return(0,r.jsxs)("header",{className:"flex h-20 items-center justify-between border-b bg-white px-4 md:px-8",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"md:hidden",children:"/"!==m&&(0,r.jsx)(i.default,{href:"/",className:"flex items-center justify-center p-2 -ml-2 text-slate-600 hover:bg-slate-100 rounded-full",children:(0,r.jsx)(a.Z,{className:"h-6 w-6"})})}),(0,r.jsx)("h2",{className:"text-lg md:text-xl font-bold text-slate-800 truncate max-w-[200px] md:max-w-none",children:t||"Y\xf6netim Paneli"})]}),(0,r.jsx)("div",{className:"flex items-center gap-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3 rounded-full border border-slate-200 bg-slate-50 p-1 pl-4 pr-2",children:[(0,r.jsx)("div",{className:"flex flex-col items-end",children:b?(0,r.jsx)("span",{className:"text-xs text-slate-400",children:"Y\xfckleniyor..."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-sm font-semibold text-slate-900",children:(null==p?void 0:p.full_name)||(null==p?void 0:p.name)||(null==p?void 0:p.email)||"Kullanıcı"}),(0,r.jsx)("span",{className:"text-xs text-slate-500 capitalize",children:u||"Yetkisiz"})]})}),(0,r.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-slate-200 text-slate-600",children:(0,r.jsx)(l.Z,{className:"h-5 w-5"})}),(0,r.jsx)("button",{onClick:f,className:"ml-2 rounded-full p-2 text-slate-400 hover:bg-slate-200 hover:text-slate-600 transition-colors",title:"\xc7ıkış Yap",children:(0,r.jsx)(n.Z,{className:"h-5 w-5"})})]})})]})}},5838:function(e,t,s){"use strict";s.d(t,{j:function(){return l}});var r=s(4090),a=s(8458);function l(){let[e,t]=(0,r.useState)(null),[s,l]=(0,r.useState)(null),[n,d]=(0,r.useState)(!0),c=(0,a.e)();return(0,r.useEffect)(()=>{(async function(){try{let{data:{user:e}}=await c.auth.getUser();if(e){let{data:s}=await c.from("profiles").select("*").eq("id",e.id).single();s&&(t(s.role),l(s))}}catch(e){console.error("Error fetching role:",e)}finally{d(!1)}})()},[]),{role:e,profile:s,loading:n}}},1657:function(e,t,s){"use strict";s.d(t,{cn:function(){return l}});var r=s(3167),a=s(1367);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}},7976:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(7461).Z)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},9108:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(7461).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},6490:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(7461).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1049:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(7461).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},3915:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(7461).Z)("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]])},1213:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(7461).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},4059:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(7461).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},8458:function(e,t,s){"use strict";s.d(t,{e:function(){return a}});var r=s(6070);function a(){return(0,r.createBrowserClient)("https://rzcumzfzurthasgptggd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ6Y3VtemZ6dXJ0aGFzZ3B0Z2dkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYxNDA5MzYsImV4cCI6MjA4MTcxNjkzNn0.NlyDKeMj-4xa7ZSt5wsyRdCOay8w2SAIA-ZTjIRkyHw")}}},function(e){e.O(0,[257,288,250,224,807,971,69,744],function(){return e(e.s=3485)}),_N_E=e.O()}]);