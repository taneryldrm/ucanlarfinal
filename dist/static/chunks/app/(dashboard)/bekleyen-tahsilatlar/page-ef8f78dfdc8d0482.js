(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[792],{2011:function(e,t,s){Promise.resolve().then(s.bind(s,8320))},8320:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var a=s(3827),n=s(1232),l=s(527),r=s(8670),i=s(9108),c=s(7805),d=s(4090),o=s(8792),u=s(9807);function x(){let[e,t]=(0,d.useState)(""),[s,x]=(0,d.useState)([]),[m,h]=(0,d.useState)(1),[f]=(0,d.useState)(10),[p,y]=(0,d.useState)(0),[j,b]=(0,d.useState)(!0),[N,g]=(0,d.useState)(0);async function v(){b(!0);try{let{data:t,count:s}=await (0,u.NJ)(m,f,e);x(t||[]),y(s||0);let a=(null==t?void 0:t.reduce((e,t)=>e+(t.pending||0),0))||0;g(a)}catch(e){console.error(e)}finally{b(!1)}}(0,d.useEffect)(()=>{let e=setTimeout(()=>{v()},300);return()=>clearTimeout(e)},[m,e]);let k=Math.ceil(p/f);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h,{title:"Bekleyen Tahsilatlar"}),(0,a.jsxs)("div",{className:"p-8 space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-slate-800",children:"Bekleyen Tahsilatlar"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 rounded-lg bg-orange-50 px-3 py-1 text-sm font-medium text-orange-700 border border-orange-100",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4"}),"Toplam Bekleyen (Bu Sayfa): ",(0,a.jsxs)("span",{className:"font-bold",children:["₺",N.toLocaleString("tr-TR",{minimumFractionDigits:2})]})]})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-slate-200 bg-white shadow-sm p-6",children:[(0,a.jsxs)("div",{className:"mb-6 max-w-md relative",children:[(0,a.jsx)(r.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400"}),(0,a.jsx)("input",{type:"text",value:e,onChange:e=>{t(e.target.value),h(1)},placeholder:"M\xfcşteri ara...",className:"w-full rounded-lg border border-slate-200 py-2.5 pl-10 pr-4 text-sm outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/10"})]}),(0,a.jsx)("div",{className:"overflow-x-auto min-h-[400px]",children:(0,a.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,a.jsx)("thead",{className:"text-slate-500 border-b border-slate-100",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-4 font-medium",children:"M\xfcşteri"}),(0,a.jsx)("th",{className:"px-4 py-4 font-medium",children:"Telefon"}),(0,a.jsx)("th",{className:"px-4 py-4 font-medium",children:"Son İşlem Tarihi"}),(0,a.jsx)("th",{className:"px-4 py-4 font-bold text-slate-700 text-right",children:"Bekleyen Tutar"}),(0,a.jsx)("th",{className:"px-4 py-4 text-center font-medium",children:"İşlemler"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-slate-100",children:j?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"p-8 text-center text-slate-500",children:"Y\xfckleniyor..."})}):0===s.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"px-4 py-8 text-center text-slate-500",children:"Bekleyen tahsilat bulunmamaktadır."})}):s.map((e,t)=>(0,a.jsxs)("tr",{className:"group hover:bg-slate-50/50 transition-colors",children:[(0,a.jsx)("td",{className:"px-4 py-4 font-bold text-slate-800",children:e.name}),(0,a.jsx)("td",{className:"px-4 py-4 text-slate-600",children:e.phone||"-"}),(0,a.jsx)("td",{className:"px-4 py-4 text-slate-600",children:e.lastTransactionDate}),(0,a.jsxs)("td",{className:"px-4 py-4 text-right font-bold text-orange-600",children:["₺",e.pending.toLocaleString("tr-TR",{minimumFractionDigits:2})]}),(0,a.jsx)("td",{className:"px-4 py-4 text-center",children:(0,a.jsx)(o.default,{href:"/gunluk-kasa",className:"inline-flex items-center justify-center rounded bg-green-600 px-3 py-1.5 text-xs font-bold text-white hover:bg-green-700 transition-colors",children:"Tahsil Et"})})]},t))})]})}),k>1&&(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-between border-t border-slate-100 pt-4",children:[(0,a.jsxs)("div",{className:"text-sm text-slate-500",children:["Toplam ",p," kayıt, Sayfa ",m," / ",k]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>h(e=>Math.max(1,e-1)),disabled:1===m,className:"flex items-center gap-1 rounded px-3 py-1.5 text-sm font-medium hover:bg-slate-100 disabled:opacity-50",children:[(0,a.jsx)(i.Z,{className:"h-4 w-4"})," \xd6nceki"]}),(0,a.jsxs)("button",{onClick:()=>h(e=>Math.min(k,e+1)),disabled:m===k,className:"flex items-center gap-1 rounded px-3 py-1.5 text-sm font-medium hover:bg-slate-100 disabled:opacity-50",children:["Sonraki ",(0,a.jsx)(c.Z,{className:"h-4 w-4"})]})]})]})]})]})]})}},1232:function(e,t,s){"use strict";s.d(t,{h:function(){return x}});var a=s(3827),n=s(9108),l=s(1213),r=s(1049),i=s(8458),c=s(7907),d=s(8792),o=s(6288),u=s(5838);function x(e){let{title:t}=e,s=(0,c.useRouter)(),x=(0,c.usePathname)(),m=(0,i.e)(),{role:h,profile:f,loading:p}=(0,u.j)(),y=async()=>{try{await m.auth.signOut(),o.toast.success("\xc7ıkış yapıldı"),s.push("/login"),s.refresh()}catch(e){o.toast.error("\xc7ıkış yapılırken hata oluştu")}};return(0,a.jsxs)("header",{className:"flex h-20 items-center justify-between border-b bg-white px-4 md:px-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"md:hidden",children:"/"!==x&&(0,a.jsx)(d.default,{href:"/",className:"flex items-center justify-center p-2 -ml-2 text-slate-600 hover:bg-slate-100 rounded-full",children:(0,a.jsx)(n.Z,{className:"h-6 w-6"})})}),(0,a.jsx)("h2",{className:"text-lg md:text-xl font-bold text-slate-800 truncate max-w-[200px] md:max-w-none",children:t||"Y\xf6netim Paneli"})]}),(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 rounded-full border border-slate-200 bg-slate-50 p-1 pl-4 pr-2",children:[(0,a.jsx)("div",{className:"flex flex-col items-end",children:p?(0,a.jsx)("span",{className:"text-xs text-slate-400",children:"Y\xfckleniyor..."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-sm font-semibold text-slate-900",children:(null==f?void 0:f.full_name)||(null==f?void 0:f.name)||(null==f?void 0:f.email)||"Kullanıcı"}),(0,a.jsx)("span",{className:"text-xs text-slate-500 capitalize",children:h||"Yetkisiz"})]})}),(0,a.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-slate-200 text-slate-600",children:(0,a.jsx)(l.Z,{className:"h-5 w-5"})}),(0,a.jsx)("button",{onClick:y,className:"ml-2 rounded-full p-2 text-slate-400 hover:bg-slate-200 hover:text-slate-600 transition-colors",title:"\xc7ıkış Yap",children:(0,a.jsx)(r.Z,{className:"h-5 w-5"})})]})})]})}},5838:function(e,t,s){"use strict";s.d(t,{j:function(){return l}});var a=s(4090),n=s(8458);function l(){let[e,t]=(0,a.useState)(null),[s,l]=(0,a.useState)(null),[r,i]=(0,a.useState)(!0),c=(0,n.e)();return(0,a.useEffect)(()=>{(async function(){try{let{data:{user:e}}=await c.auth.getUser();if(e){let{data:s}=await c.from("profiles").select("*").eq("id",e.id).single();s&&(t(s.role),l(s))}}catch(e){console.error("Error fetching role:",e)}finally{i(!1)}})()},[]),{role:e,profile:s,loading:r}}},9108:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},7805:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},527:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},1049:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},8670:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},1213:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.300.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(7461).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},8792:function(e,t,s){"use strict";s.d(t,{default:function(){return n.a}});var a=s(5250),n=s.n(a)},7907:function(e,t,s){"use strict";var a=s(5313);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},8458:function(e,t,s){"use strict";s.d(t,{e:function(){return n}});var a=s(6070);function n(){return(0,a.createBrowserClient)("https://rzcumzfzurthasgptggd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ6Y3VtemZ6dXJ0aGFzZ3B0Z2dkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYxNDA5MzYsImV4cCI6MjA4MTcxNjkzNn0.NlyDKeMj-4xa7ZSt5wsyRdCOay8w2SAIA-ZTjIRkyHw")}}},function(e){e.O(0,[257,288,250,807,971,69,744],function(){return e(e.s=2011)}),_N_E=e.O()}]);