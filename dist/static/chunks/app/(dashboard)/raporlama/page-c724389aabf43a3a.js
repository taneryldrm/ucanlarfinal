(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[629],{9068:function(e,t,s){Promise.resolve().then(s.bind(s,9448))},9448:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return k}});var l=s(3827),a=s(1232),r=s(834),i=s(8219),n=s(775),d=s(9733),c=s(9475),x=s(8967),o=s(3051),m=s(1657),h=s(7819),u=s(6363),j=s(8333),f=s(3356),b=s(2983),p=s(5758),g=s(2838),N=s(1433),v=s(8465),y=s(4090),w=s(9807);function k(){let[e,t]=(0,y.useState)("genel"),[s,k]=(0,y.useState)("year"),[S,F]=(0,y.useState)(!0),[T,D]=(0,y.useState)({trendData:[],profitData:[],summary:{income:0,expense:0,profit:0,jobs:0}}),[z,L]=(0,y.useState)([]);(0,y.useEffect)(()=>{!async function(){F(!0);try{let[e,t]=await Promise.all([(0,w.IG)(s),(0,w.CV)()]);D(e),L(t)}catch(e){console.error("Failed to load report data",e)}finally{F(!1)}}()},[s]);let R=z.reduce((e,t)=>e+t.billed,0),B=z.reduce((e,t)=>e+t.collected,0),I=z.reduce((e,t)=>e+t.pending,0),Z=R>0?B/R*100:0;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.h,{title:"Raporlama"}),(0,l.jsxs)("div",{className:"p-8 space-y-8",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-slate-800",children:"Raporlama & Analitik"}),(0,l.jsx)("p",{className:"text-slate-500",children:"İş performansı ve finansal analiz"})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)("select",{value:s,onChange:e=>k(e.target.value),className:"rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm font-medium text-slate-600 outline-none hover:border-slate-300",children:[(0,l.jsx)("option",{value:"6months",children:"Son 6 Ay"}),(0,l.jsx)("option",{value:"year",children:"Bu Yıl"})]}),(0,l.jsx)("button",{onClick:()=>window.location.reload(),className:"flex h-9 w-9 items-center justify-center rounded-lg border border-slate-200 bg-white text-slate-600 hover:bg-slate-50 hover:text-slate-900",children:(0,l.jsx)(r.Z,{className:"h-4 w-4"})})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4",children:[(0,l.jsx)("div",{className:"rounded-xl border border-slate-100 bg-white p-6 shadow-sm",children:(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-slate-500",children:"Bu Ay Gelir"}),(0,l.jsxs)("h3",{className:"mt-2 text-3xl font-bold text-slate-900",children:["₺",T.summary.income.toLocaleString("tr-TR",{minimumFractionDigits:2})]})]}),(0,l.jsx)("div",{className:"rounded-lg bg-green-50 p-2 text-green-600",children:(0,l.jsx)(i.Z,{className:"h-5 w-5"})})]})}),(0,l.jsx)("div",{className:"rounded-xl border border-slate-100 bg-white p-6 shadow-sm",children:(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-slate-500",children:"Bu Ay Gider"}),(0,l.jsxs)("h3",{className:"mt-2 text-3xl font-bold text-slate-900",children:["₺",T.summary.expense.toLocaleString("tr-TR",{minimumFractionDigits:2})]})]}),(0,l.jsx)("div",{className:"rounded-lg bg-red-50 p-2 text-red-600",children:(0,l.jsx)(n.Z,{className:"h-5 w-5"})})]})}),(0,l.jsx)("div",{className:"rounded-xl border border-slate-100 bg-white p-6 shadow-sm",children:(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-slate-500",children:"Bu Ay Kar"}),(0,l.jsxs)("h3",{className:"mt-2 text-3xl font-bold text-slate-900",children:["₺",T.summary.profit.toLocaleString("tr-TR",{minimumFractionDigits:2})]})]}),(0,l.jsx)("div",{className:"rounded-lg bg-blue-50 p-2 text-blue-600",children:(0,l.jsx)(d.Z,{className:"h-5 w-5"})})]})}),(0,l.jsx)("div",{className:"rounded-xl border border-slate-100 bg-white p-6 shadow-sm",children:(0,l.jsxs)("div",{className:"flex items-start justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-slate-500",children:"Bu Ay İşler"}),(0,l.jsx)("h3",{className:"mt-2 text-3xl font-bold text-slate-900",children:T.summary.jobs})]}),(0,l.jsx)("div",{className:"rounded-lg bg-purple-50 p-2 text-purple-600",children:(0,l.jsx)(c.Z,{className:"h-5 w-5"})})]})})]}),(0,l.jsx)("div",{className:"border-b border-slate-200",children:(0,l.jsxs)("nav",{className:"-mb-px flex gap-6",children:[(0,l.jsx)("button",{onClick:()=>t("genel"),className:(0,m.cn)("border-b-2 py-4 text-sm font-medium transition-colors","genel"===e?"border-blue-600 text-blue-600":"border-transparent text-slate-500 hover:border-slate-300 hover:text-slate-700"),children:"Genel Bakış"}),(0,l.jsx)("button",{onClick:()=>t("musteri"),className:(0,m.cn)("border-b-2 py-4 text-sm font-medium transition-colors","musteri"===e?"border-blue-600 text-blue-600":"border-transparent text-slate-500 hover:border-slate-300 hover:text-slate-700"),children:"M\xfcşteri Analizi"}),(0,l.jsx)("button",{onClick:()=>t("tahsilat"),className:(0,m.cn)("border-b-2 py-4 text-sm font-medium transition-colors","tahsilat"===e?"border-blue-600 text-blue-600":"border-transparent text-slate-500 hover:border-slate-300 hover:text-slate-700"),children:"Tahsilat Analizi"})]})}),"genel"===e&&(0,l.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[(0,l.jsxs)("div",{className:"rounded-xl border border-slate-100 bg-white p-6 shadow-sm",children:[(0,l.jsx)("div",{className:"mb-6 flex items-center justify-between",children:(0,l.jsx)("h3",{className:"font-bold text-slate-900",children:"Gelir-Gider Trendi"})}),(0,l.jsx)("div",{className:"h-80 w-full",children:S?(0,l.jsx)("div",{className:"flex h-full items-center justify-center text-slate-400",children:"Y\xfckleniyor..."}):0===T.trendData.length?(0,l.jsx)("div",{className:"flex h-full items-center justify-center text-slate-400",children:"Veri bulunamadı."}):(0,l.jsx)(h.h,{width:"100%",height:"100%",children:(0,l.jsxs)(u.w,{data:T.trendData,children:[(0,l.jsx)(j.q,{strokeDasharray:"3 3",vertical:!1,stroke:"#E2E8F0"}),(0,l.jsx)(f.K,{dataKey:"name",axisLine:!1,tickLine:!1,stroke:"#64748B",fontSize:12,tickMargin:10}),(0,l.jsx)(b.B,{axisLine:!1,tickLine:!1,stroke:"#64748B",fontSize:12}),(0,l.jsx)(p.u,{contentStyle:{backgroundColor:"#fff",borderRadius:"8px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),(0,l.jsx)(g.x1,{type:"monotone",dataKey:"gelir",name:"Gelir",stroke:"#22c55e",strokeWidth:2,dot:{r:4,fill:"#22c55e",strokeWidth:2,stroke:"#fff"},activeDot:{r:6}}),(0,l.jsx)(g.x1,{type:"monotone",dataKey:"gider",name:"Gider",stroke:"#ef4444",strokeWidth:2,dot:{r:4,fill:"#ef4444",strokeWidth:2,stroke:"#fff"},activeDot:{r:6}})]})})})]}),(0,l.jsxs)("div",{className:"rounded-xl border border-slate-100 bg-white p-6 shadow-sm",children:[(0,l.jsx)("div",{className:"mb-6 flex items-center justify-between",children:(0,l.jsx)("h3",{className:"font-bold text-slate-900",children:"Kar Trendi"})}),(0,l.jsx)("div",{className:"h-80 w-full",children:S?(0,l.jsx)("div",{className:"flex h-full items-center justify-center text-slate-400",children:"Y\xfckleniyor..."}):0===T.profitData.length?(0,l.jsx)("div",{className:"flex h-full items-center justify-center text-slate-400",children:"Veri bulunamadı."}):(0,l.jsx)(h.h,{width:"100%",height:"100%",children:(0,l.jsxs)(N.v,{data:T.profitData,children:[(0,l.jsx)(j.q,{strokeDasharray:"3 3",vertical:!1,stroke:"#E2E8F0"}),(0,l.jsx)(f.K,{dataKey:"name",axisLine:!1,tickLine:!1,stroke:"#64748B",fontSize:12,tickMargin:10}),(0,l.jsx)(b.B,{axisLine:!1,tickLine:!1,stroke:"#64748B",fontSize:12}),(0,l.jsx)(p.u,{cursor:{fill:"#F1F5F9"},contentStyle:{backgroundColor:"#fff",borderRadius:"8px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),(0,l.jsx)(v.$Q,{dataKey:"kar",name:"Kar",fill:"#3b82f6",radius:[4,4,0,0],barSize:40})]})})})]})]}),"musteri"===e&&(0,l.jsx)("div",{className:"space-y-6",children:(0,l.jsxs)("div",{className:"rounded-xl border border-slate-100 bg-white shadow-sm",children:[(0,l.jsxs)("div",{className:"border-b border-slate-100 p-6",children:[(0,l.jsx)("h3",{className:"font-bold text-slate-900",children:"M\xfcşteri Performans Analizi"}),(0,l.jsx)("p",{className:"text-sm text-slate-500",children:"M\xfcşteri bazlı finansal hareketler"})]}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,l.jsx)("thead",{className:"bg-slate-50 text-slate-500",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-6 py-4 font-medium",children:"M\xfcşteri"}),(0,l.jsx)("th",{className:"px-6 py-4 text-right font-medium",children:"Toplam Faturalanan"}),(0,l.jsx)("th",{className:"px-6 py-4 text-right font-medium",children:"Tahsil Edilen"}),(0,l.jsx)("th",{className:"px-6 py-4 text-right font-medium",children:"Bekleyen"}),(0,l.jsx)("th",{className:"px-6 py-4 text-center font-medium",children:"İş Sayısı"}),(0,l.jsx)("th",{className:"px-6 py-4 text-center font-medium",children:"Tahsilat Oranı"})]})}),(0,l.jsx)("tbody",{className:"divide-y divide-slate-100",children:S?(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:6,className:"p-8 text-center text-slate-500",children:"Y\xfckleniyor..."})}):0===z.length?(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:6,className:"p-8 text-center text-slate-500",children:"Veri bulunamadı."})}):z.map(e=>(0,l.jsxs)("tr",{className:"hover:bg-slate-50/50",children:[(0,l.jsx)("td",{className:"px-6 py-4 font-bold text-slate-700",children:e.name}),(0,l.jsxs)("td",{className:"px-6 py-4 text-right font-medium text-slate-900",children:["₺",e.billed.toLocaleString("tr-TR",{minimumFractionDigits:2})]}),(0,l.jsxs)("td",{className:"px-6 py-4 text-right font-medium text-green-600",children:["₺",e.collected.toLocaleString("tr-TR",{minimumFractionDigits:2})]}),(0,l.jsxs)("td",{className:"px-6 py-4 text-right font-medium text-red-600",children:["₺",e.pending.toLocaleString("tr-TR",{minimumFractionDigits:2})]}),(0,l.jsx)("td",{className:"px-6 py-4 text-center font-medium text-slate-600",children:e.jobs}),(0,l.jsx)("td",{className:"px-6 py-4 text-center",children:(0,l.jsxs)("span",{className:(0,m.cn)("inline-block rounded px-2 py-1 text-xs font-bold text-white",e.rate>=50?"bg-green-500":e.rate>0?"bg-orange-500":"bg-red-500"),children:[e.rate.toFixed(1),"%"]})})]},e.id))})]})})]})}),"tahsilat"===e&&(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:[(0,l.jsxs)("div",{className:"rounded-xl border border-slate-100 bg-white p-6 text-center shadow-sm",children:[(0,l.jsx)("h4",{className:"text-sm font-medium text-slate-500",children:"Toplam Faturalanan"}),(0,l.jsxs)("div",{className:"mt-2 text-2xl font-bold text-slate-900",children:["₺",R.toLocaleString("tr-TR",{minimumFractionDigits:2})]}),(0,l.jsx)("div",{className:"mt-1 text-xs text-slate-400",children:"T\xfcm zamanlar"})]}),(0,l.jsx)("div",{className:"rounded-xl border border-green-100 bg-green-50 p-6 shadow-sm",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("h4",{className:"text-sm font-medium text-green-600",children:"Tahsil Edilen"}),(0,l.jsxs)("div",{className:"mt-2 text-2xl font-bold text-green-700",children:["₺",B.toLocaleString("tr-TR",{minimumFractionDigits:2})]}),(0,l.jsx)("div",{className:"mt-1 flex items-center justify-center gap-1 text-xs font-medium text-green-600",children:(0,l.jsxs)("span",{children:[Z.toFixed(1),"% tahsilat oranı"]})})]})}),(0,l.jsx)("div",{className:"rounded-xl border border-red-100 bg-red-50 p-6 shadow-sm",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("h4",{className:"text-sm font-medium text-red-600",children:"Bekleyen Tahsilat"}),(0,l.jsxs)("div",{className:"mt-2 text-2xl font-bold text-red-700",children:["₺",I.toLocaleString("tr-TR",{minimumFractionDigits:2})]}),(0,l.jsxs)("div",{className:"mt-1 text-xs font-medium text-red-600",children:[100-Z,"% kalan"]})]})})]}),(0,l.jsxs)("div",{className:"rounded-xl border border-slate-100 bg-white p-6 shadow-sm",children:[(0,l.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,l.jsx)("h3",{className:"font-bold text-slate-900",children:"Tahsilat Oranı G\xf6r\xfcn\xfcm\xfc"}),(0,l.jsxs)("span",{className:"font-bold text-green-600",children:[Z.toFixed(1),"%"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"mb-2 flex justify-between text-sm font-medium",children:(0,l.jsx)("span",{className:"text-slate-600",children:"Tahsilat Oranı"})}),(0,l.jsx)("div",{className:"h-4 w-full overflow-hidden rounded-full bg-slate-100",children:(0,l.jsx)("div",{className:"h-full bg-green-500",style:{width:"".concat(Math.min(100,Z),"%")}})})]}),(0,l.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"rounded-lg bg-green-50 p-4",children:[(0,l.jsx)("div",{className:"text-xs font-medium text-green-600",children:"Tahsil Edilen"}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("span",{className:"text-xl font-bold text-green-700",children:["₺",B.toLocaleString("tr-TR",{minimumFractionDigits:2})]}),(0,l.jsx)(x.Z,{className:"h-5 w-5 text-green-600"})]})]}),(0,l.jsxs)("div",{className:"rounded-lg bg-red-50 p-4",children:[(0,l.jsx)("div",{className:"text-xs font-medium text-red-600",children:"Bekleyen"}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("span",{className:"text-xl font-bold text-red-700",children:["₺",I.toLocaleString("tr-TR",{minimumFractionDigits:2})]}),(0,l.jsx)(o.Z,{className:"h-5 w-5 text-red-600"})]})]})]})]})]})]})]})}},1232:function(e,t,s){"use strict";s.d(t,{h:function(){return m}});var l=s(3827),a=s(9108),r=s(1213),i=s(1049),n=s(8458),d=s(7907),c=s(8792),x=s(6288),o=s(5838);function m(e){let{title:t}=e,s=(0,d.useRouter)(),m=(0,d.usePathname)(),h=(0,n.e)(),{role:u,profile:j,loading:f}=(0,o.j)(),b=async()=>{try{await h.auth.signOut(),x.toast.success("\xc7ıkış yapıldı"),s.push("/login"),s.refresh()}catch(e){x.toast.error("\xc7ıkış yapılırken hata oluştu")}};return(0,l.jsxs)("header",{className:"flex h-20 items-center justify-between border-b bg-white px-4 md:px-8",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"md:hidden",children:"/"!==m&&(0,l.jsx)(c.default,{href:"/",className:"flex items-center justify-center p-2 -ml-2 text-slate-600 hover:bg-slate-100 rounded-full",children:(0,l.jsx)(a.Z,{className:"h-6 w-6"})})}),(0,l.jsx)("h2",{className:"text-lg md:text-xl font-bold text-slate-800 truncate max-w-[200px] md:max-w-none",children:t||"Y\xf6netim Paneli"})]}),(0,l.jsx)("div",{className:"flex items-center gap-4",children:(0,l.jsxs)("div",{className:"flex items-center gap-3 rounded-full border border-slate-200 bg-slate-50 p-1 pl-4 pr-2",children:[(0,l.jsx)("div",{className:"flex flex-col items-end",children:f?(0,l.jsx)("span",{className:"text-xs text-slate-400",children:"Y\xfckleniyor..."}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"text-sm font-semibold text-slate-900",children:(null==j?void 0:j.full_name)||(null==j?void 0:j.name)||(null==j?void 0:j.email)||"Kullanıcı"}),(0,l.jsx)("span",{className:"text-xs text-slate-500 capitalize",children:u||"Yetkisiz"})]})}),(0,l.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-slate-200 text-slate-600",children:(0,l.jsx)(r.Z,{className:"h-5 w-5"})}),(0,l.jsx)("button",{onClick:b,className:"ml-2 rounded-full p-2 text-slate-400 hover:bg-slate-200 hover:text-slate-600 transition-colors",title:"\xc7ıkış Yap",children:(0,l.jsx)(i.Z,{className:"h-5 w-5"})})]})})]})}},5838:function(e,t,s){"use strict";s.d(t,{j:function(){return r}});var l=s(4090),a=s(8458);function r(){let[e,t]=(0,l.useState)(null),[s,r]=(0,l.useState)(null),[i,n]=(0,l.useState)(!0),d=(0,a.e)();return(0,l.useEffect)(()=>{(async function(){try{let{data:{user:e}}=await d.auth.getUser();if(e){let{data:s}=await d.from("profiles").select("*").eq("id",e.id).single();s&&(t(s.role),r(s))}}catch(e){console.error("Error fetching role:",e)}finally{n(!1)}})()},[]),{role:e,profile:s,loading:i}}},1657:function(e,t,s){"use strict";s.d(t,{cn:function(){return r}});var l=s(3167),a=s(1367);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,l.W)(t))}},8458:function(e,t,s){"use strict";s.d(t,{e:function(){return a}});var l=s(6070);function a(){return(0,l.createBrowserClient)("https://rzcumzfzurthasgptggd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ6Y3VtemZ6dXJ0aGFzZ3B0Z2dkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYxNDA5MzYsImV4cCI6MjA4MTcxNjkzNn0.NlyDKeMj-4xa7ZSt5wsyRdCOay8w2SAIA-ZTjIRkyHw")}}},function(e){e.O(0,[257,288,250,224,614,807,971,69,744],function(){return e(e.s=9068)}),_N_E=e.O()}]);